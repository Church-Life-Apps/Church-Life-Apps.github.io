(this["webpackJsonphymnal-app"]=this["webpackJsonphymnal-app"]||[]).push([[7],{172:function(e,n,t){},174:function(e,n,t){var r={"./ion-action-sheet-ios.entry.js":[306,11],"./ion-action-sheet-md.entry.js":[307,12],"./ion-alert-ios.entry.js":[308,13],"./ion-alert-md.entry.js":[309,14],"./ion-app_8-ios.entry.js":[310,15],"./ion-app_8-md.entry.js":[311,16],"./ion-avatar_3-ios.entry.js":[312,33],"./ion-avatar_3-md.entry.js":[313,34],"./ion-back-button-ios.entry.js":[314,35],"./ion-back-button-md.entry.js":[315,36],"./ion-backdrop-ios.entry.js":[316,77],"./ion-backdrop-md.entry.js":[317,78],"./ion-button_2-ios.entry.js":[318,37],"./ion-button_2-md.entry.js":[319,38],"./ion-card_5-ios.entry.js":[320,39],"./ion-card_5-md.entry.js":[321,40],"./ion-checkbox-ios.entry.js":[322,41],"./ion-checkbox-md.entry.js":[323,42],"./ion-chip-ios.entry.js":[324,43],"./ion-chip-md.entry.js":[325,44],"./ion-col_3.entry.js":[326,79],"./ion-datetime_3-ios.entry.js":[327,21],"./ion-datetime_3-md.entry.js":[328,22],"./ion-fab_3-ios.entry.js":[329,45],"./ion-fab_3-md.entry.js":[330,46],"./ion-img.entry.js":[331,80],"./ion-infinite-scroll_2-ios.entry.js":[332,81],"./ion-infinite-scroll_2-md.entry.js":[333,82],"./ion-input-ios.entry.js":[334,47],"./ion-input-md.entry.js":[335,48],"./ion-item-option_3-ios.entry.js":[336,49],"./ion-item-option_3-md.entry.js":[337,50],"./ion-item_8-ios.entry.js":[338,51],"./ion-item_8-md.entry.js":[339,52],"./ion-loading-ios.entry.js":[340,53],"./ion-loading-md.entry.js":[341,54],"./ion-menu_3-ios.entry.js":[342,55],"./ion-menu_3-md.entry.js":[343,56],"./ion-modal-ios.entry.js":[344,17],"./ion-modal-md.entry.js":[345,18],"./ion-nav_2.entry.js":[346,29],"./ion-popover-ios.entry.js":[347,19],"./ion-popover-md.entry.js":[348,20],"./ion-progress-bar-ios.entry.js":[349,57],"./ion-progress-bar-md.entry.js":[350,58],"./ion-radio_2-ios.entry.js":[351,59],"./ion-radio_2-md.entry.js":[352,60],"./ion-range-ios.entry.js":[353,61],"./ion-range-md.entry.js":[354,62],"./ion-refresher_2-ios.entry.js":[355,23],"./ion-refresher_2-md.entry.js":[356,24],"./ion-reorder_2-ios.entry.js":[357,31],"./ion-reorder_2-md.entry.js":[358,32],"./ion-ripple-effect.entry.js":[359,83],"./ion-route_4.entry.js":[360,63],"./ion-searchbar-ios.entry.js":[361,64],"./ion-searchbar-md.entry.js":[362,65],"./ion-segment_2-ios.entry.js":[363,66],"./ion-segment_2-md.entry.js":[364,67],"./ion-select_3-ios.entry.js":[365,68],"./ion-select_3-md.entry.js":[366,69],"./ion-slide_2-ios.entry.js":[367,84],"./ion-slide_2-md.entry.js":[368,85],"./ion-spinner.entry.js":[369,27],"./ion-split-pane-ios.entry.js":[370,86],"./ion-split-pane-md.entry.js":[371,87],"./ion-tab-bar_2-ios.entry.js":[372,70],"./ion-tab-bar_2-md.entry.js":[373,71],"./ion-tab_2.entry.js":[374,30],"./ion-text.entry.js":[375,72],"./ion-textarea-ios.entry.js":[376,73],"./ion-textarea-md.entry.js":[377,74],"./ion-toast-ios.entry.js":[378,75],"./ion-toast-md.entry.js":[379,76],"./ion-toggle-ios.entry.js":[380,25],"./ion-toggle-md.entry.js":[381,26],"./ion-virtual-scroll.entry.js":[382,88]};function a(e){if(!t.o(r,e))return Promise.resolve().then((function(){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}));var n=r[e],a=n[0];return t.e(n[1]).then((function(){return t(a)}))}a.keys=function(){return Object.keys(r)},a.id=174,e.exports=a},176:function(e,n,t){var r={"./ion-icon.entry.js":[384,91]};function a(e){if(!t.o(r,e))return Promise.resolve().then((function(){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}));var n=r[e],a=n[0];return t.e(n[1]).then((function(){return t(a)}))}a.keys=function(){return Object.keys(r)},a.id=176,e.exports=a},184:function(e,n){},186:function(e,n){},198:function(e,n){},200:function(e,n){},227:function(e,n){},229:function(e,n){},230:function(e,n){},235:function(e,n){},237:function(e,n){},256:function(e,n){},268:function(e,n){},271:function(e,n){},302:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),o=t(60),i=t.n(o),c=t(59),s=t(7),u=(t(162),t(163),t(164),t(165),t(166),t(167),t(168),t(169),t(170),t(171),t(172),t(1)),l=t(8),m=(t(43),t(10)),d=t(96),f=t.n(d),b=t(68),y=t.n(b);var g,j=function(){var e,n,t=Object(r.useState)(""),o=Object(l.a)(t,2),i=o[0],c=o[1],s=Object(r.useState)(""),m=Object(l.a)(s,2),d=m[0],b=m[1],g=Object(r.useState)(""),j=Object(l.a)(g,2),p=j[0],h=j[1],E=Object(r.useState)(!1),v=Object(l.a)(E,2),k=v[0],O=v[1];return f.a.init((e="U2FsdGVkX19ijiVnA6XtmJ4wa/RL9NngWwn4uKfq6gO+4ZI/V1F/RCYL4REfk0tZ",n="jesus private key",y.a.AES.decrypt(e,n).toString(y.a.enc.Utf8))),a.a.createElement("div",{id:"feedbackFormDiv"},a.a.createElement(u.p,null,a.a.createElement(u.q,{position:"floating"},"Name"),a.a.createElement(u.o,{type:"text",value:i,placeholder:"Enter your name",onIonChange:function(e){return c(e.detail.value)}})),a.a.createElement(u.p,null,a.a.createElement(u.q,{position:"floating"},"What do you think?"),a.a.createElement(u.w,{rows:7,value:d,placeholder:"Enter feedback",onIonChange:function(e){return b(e.detail.value)}})),a.a.createElement(u.a,{expand:"full",onClick:function(){var e={from_name:i,message:d};""===d||""===i?h("Please tell us your name and feedback message!"):(f.a.send("hymnal_app_service_id","template_z4z7bhi",e).then((function(e){console.debug("Email sent successfully.",e.status,e.text),h("Feedback Submitted Sucessfully, Thanks!")}),(function(e){h("Error Submitting Feedback: ".concat(e)),console.error("Error sending email: ",e)})),c(""),b(""));O(!0)}},"Submit Feedback"),a.a.createElement(u.s,{id:"feedbackResponseModal",isOpen:k,onDidDismiss:_},a.a.createElement("h1",{className:"center"},p),a.a.createElement(u.a,{id:"feedbackResponseOKButton",onClick:_},"OK")));function _(){h(""),O(!1)}},p=function(){var e=Object(r.useState)(""),n=Object(l.a)(e,2),t=n[0],o=n[1];return a.a.createElement(u.i,null,""===t?a.a.createElement(u.r,null,a.a.createElement(u.p,{id:"settingsTitle"},a.a.createElement(u.q,null,"Settings")),a.a.createElement(u.p,null,a.a.createElement(u.a,{onClick:function(){return o("feedback")}},"Submit Feedback"))):null,"feedback"===t?a.a.createElement(j,null):null,""!==t?a.a.createElement(u.a,{color:"light",expand:"full",id:"backToSettingsButton",onClick:function(){return o("")}},"Return to Settings"):null)},h=function(e){var n=Object(r.useState)(!1),t=Object(l.a)(n,2),o=t[0],i=t[1];return a.a.createElement(u.z,null,a.a.createElement(u.x,{id:"appName"},Y),a.a.createElement(u.b,{slot:"start"},function(){if(!e.backButtonOnClick)return null;return a.a.createElement(u.a,{onClick:e.backButtonOnClick},a.a.createElement(u.l,{icon:m.i}))}()),a.a.createElement(u.b,{slot:"primary"},function(){if(!e.toggleSongModeOnClick)return null;return a.a.createElement(u.a,{id:"songViewToggler",onClick:e.toggleSongModeOnClick},a.a.createElement(u.l,{icon:m.l}),a.a.createElement(u.l,{icon:m.r}),a.a.createElement(u.l,{icon:m.h}))}(),a.a.createElement(u.a,{onClick:function(){return i(!0)}},a.a.createElement(u.l,{icon:m.q}))),a.a.createElement(u.s,{id:"settingsModal",isOpen:o,onDidDismiss:function(){return i(!1)}},a.a.createElement(p,null),a.a.createElement(u.a,{id:"returnToHymnalButton",onClick:function(){return i(!1)}},"Back to Hymnal")))},E=function(){return a.a.createElement(u.t,null,a.a.createElement(u.k,null,a.a.createElement(h,null)),a.a.createElement(u.i,null,a.a.createElement(s.a,{to:"shl"})))},v=function(e){var n=Object(s.h)().bookId,t=Object(r.useState)([]),o=Object(l.a)(t,2),i=o[0],c=o[1],m=Object(r.useState)(e.songs.entries()),d=Object(l.a)(m,1)[0],f=Object(s.g)();return 0===i.length&&b(d,20),i.length>0?a.a.createElement("div",null,a.a.createElement(u.r,{id:"searchViewSongList"},i),a.a.createElement(u.m,{onIonInfinite:function(e){var n=e.target;b(d,10)||(n.disabled=!0);c(Array.from(i)),n.complete()}},a.a.createElement(u.n,{loadingSpinner:"bubbles",loadingText:"Loading more songs..."}))):a.a.createElement(u.p,null,a.a.createElement(u.q,null,"No results found"));function b(e,n){for(;n>0;){var t=e.next();if(t.done)return!1;var r=t.value[1];i.push(y(r)),n--}return!0}function y(e){return a.a.createElement(u.c,{key:e.songNumber,onClick:function(){f.push("/".concat(n,"/").concat(e.songNumber))},className:"hymnalListView"},a.a.createElement(u.g,null,e.songNumber,". ",e.title),a.a.createElement(u.f,null,e.author))}},k=t(12),O=t.n(k),_=t(42),N=t(32),S="Songs and Hymns of Life",w="https://raw.githubusercontent.com/Church-Life-Apps/Resources/master/resources/metadata/shl.json";!function(e){e[e.Music=0]="Music",e[e.Lyrics=1]="Lyrics"}(g||(g={}));var C={title:"",author:"",songNumber:0,lyrics:new Map};function x(e){return e.replace(/[!"#$%&'()*+,-./:;<=>?@[\]^_`{|}~]/g,"")}var L=t(301);function M(e,n){return L.compareTwoStrings(x(e.toString().toLowerCase()),n)}function I(e){return e.split(" ")}function T(e){return x(e).toLowerCase().trim()}function B(e){return!isNaN(+e)}var F=void 0,R=new Map,D=new Map;function V(){return A.apply(this,arguments)}function A(){return(A=Object(N.a)(O.a.mark((function e(){var n,t,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==F){e.next=13;break}return e.next=3,fetch(w);case 3:return n=e.sent,e.next=6,n.json();case 6:return t=e.sent,r=t[S],F=r,console.debug("Fetching lyrics"),e.abrupt("return",r);case 13:return console.debug("Returning stored lyrics"),e.abrupt("return",F);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(){return(z=Object(N.a)(O.a.mark((function e(n){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V();case 2:if(t=e.sent,!(n<0||n>=t.length)){e.next=7;break}return e.abrupt("return",{title:"",author:"",songNumber:-1,lyrics:JSON.parse("{}")});case 7:return e.abrupt("return",t[n-1]);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return(U=Object(N.a)(O.a.mark((function e(n){var t,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V();case 2:if(t=e.sent,""!==n){e.next=7;break}return e.abrupt("return",t);case 7:if(!B(n)){e.next=11;break}return e.abrupt("return",t.filter((function(e){return e.songNumber.toString().startsWith(n)})));case 11:return r=new Map,t.forEach((function(e){r.set(e.songNumber,q(e,n))})),console.log(r),e.abrupt("return",t.filter((function(e){return r.get(e.songNumber)>0})).sort((function(e,n){return r.get(n.songNumber)-r.get(e.songNumber)})));case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e,n){var t=0,r=T(n),a=I(r),o=T(e.title),i=I(o),c=T(e.author),s=I(c);if(o.includes(r))t+=1e3;else{var u,l=Object(_.a)(i);try{for(l.s();!(u=l.n()).done;){var m,d=u.value,f=Object(_.a)(a);try{for(f.s();!(m=f.n()).done;){M(d,m.value)>.9&&(t+=100)}}catch(N){f.e(N)}finally{f.f()}}}catch(N){l.e(N)}finally{l.f()}}if(c.includes(r))t+=900;else{var b,y=Object(_.a)(s);try{for(y.s();!(b=y.n()).done;){var g,j=b.value,p=Object(_.a)(a);try{for(p.s();!(g=p.n()).done;){M(j,g.value)>.9&&(t+=90)}}catch(N){p.e(N)}finally{p.f()}}}catch(N){y.e(N)}finally{y.f()}}if(R.has(e.songNumber)||R.set(e.songNumber,Object.values(e.lyrics).map((function(e){return T(String(e))})).join(" ")),D.has(e.songNumber)||D.set(e.songNumber,I(R.get(e.songNumber))),R.get(e.songNumber).includes(r))t+=500;else{var h,E=Object(_.a)(D.get(e.songNumber));try{for(E.s();!(h=E.n()).done;){var v,k=h.value,O=Object(_.a)(a);try{for(O.s();!(v=O.n()).done;){M(k,v.value)>.9&&(t+=1)}}catch(N){O.e(N)}finally{O.f()}}}catch(N){E.e(N)}finally{E.f()}}return t}var H=function(){var e=Object(r.useState)(""),n=Object(l.a)(e,2),t=n[0],o=n[1],i=Object(r.useState)([]),c=Object(l.a)(i,2),m=c[0],d=c[1];Object(r.useEffect)((function(){var e=setTimeout((function(){(function(e){return U.apply(this,arguments)})(t).then((function(e){d(e)}))}),200);return function(){return clearTimeout(e)}}),[t]);var f=Object(s.g)();return a.a.createElement(u.t,null,a.a.createElement(u.k,null,a.a.createElement(h,{backButtonOnClick:function(){return f.push("/")}})),a.a.createElement(u.p,null,a.a.createElement(u.o,{id:"searchBar",type:"search",value:t,placeholder:"Search for a song",onIonChange:function(e){return o(e.detail.value)}})),a.a.createElement(u.i,null,a.a.createElement(v,{key:t+m.length,songs:m})))},P=t(69),W=function(e,n,t){P.a.event({category:e,action:n,label:t})};function J(e,n){try{W("INTERACTION","Song viewed(".concat(g[n],")"),e.toString()),console.debug("Song number: ".concat(String(e)," viewed in ").concat(g[n]," mode"))}catch(t){console.error(t)}}var K=function(e){var n=Object(r.useState)(C),t=Object(l.a)(n,2),o=t[0],i=t[1];return Object(r.useEffect)((function(){J(e.songNumber,g.Lyrics),function(e){return z.apply(this,arguments)}(e.songNumber).then((function(e){i(e)}))}),[]),a.a.createElement(u.j,null,a.a.createElement(u.u,{class:"ion-justify-content-center"},a.a.createElement(u.h,{size:"12","size-lg":"8","size-xl":"6"},a.a.createElement(u.c,{id:"lyricViewCard",className:"ion-padding"},a.a.createElement(u.e,{className:"ion-text-center"},a.a.createElement(u.g,{key:"title"},null===o||void 0===o?void 0:o.title),a.a.createElement(u.f,{key:"author"},"By ",null===o||void 0===o?void 0:o.author)),a.a.createElement(u.d,{key:"lyrics"},o?function(e){for(var n=[],t=0,o=e.lyrics,i=Object.keys(o),c=Object.values(o),s=0;s<i.length;++s){var l=i[s],m=c[s];n.push(a.a.createElement(r.Fragment,{key:t++},a.a.createElement("div",{className:"ion-margin-vertical"}))),n.push(a.a.createElement("h5",{key:t++,className:"ion-margin-top"},l.toLowerCase().replace("v","Verse ").replace("c","Chorus ").replace("b","Bridge ").replace("p","Pre-Chorus "))),m.forEach((function(e){n.push(a.a.createElement(u.v,{key:t++,className:"lyricVerse",color:"dark"},a.a.createElement("p",null,e)))}))}return n}(o):o)))))};var X=[156,216,278,478],Z=function(e){var n,t=Object(u.B)("desktop")?window.innerWidth/2:window.innerWidth,o=Object(r.useState)(!1),i=Object(l.a)(o,2),c=i[0],s=i[1],m=Object(r.useState)(t),d=Object(l.a)(m,2),f=d[0],b=d[1],y=Object(r.useState)(!1),j=Object(l.a)(y,2),p=j[0],h=j[1],E=X.includes(e.songNumber),v=E&&c?"-B":"",k="https://raw.githubusercontent.com/Church-Life-Apps/Resources/master/resources/images/shl/SHL_"+((n=e.songNumber)<10?"00".concat(n):n<100?"0".concat(n):"".concat(n))+v+".png";return Object(r.useEffect)((function(){J(e.songNumber,g.Music)}),[e.songNumber]),a.a.createElement("div",null,E&&a.a.createElement("div",{id:"songToggler"},a.a.createElement(u.y,{checked:c,onIonChange:function(){return s(!c)}})),a.a.createElement("img",{style:{width:f},id:"musicView",onDoubleClick:function(){b(p?t:2*t),h(!p)},src:k,alt:"No Song Found"}))},G=function(){var e,n=Object(s.h)(),t=n.bookId,o=n.songId,i=Object(s.g)(),c=Object(r.useState)(g.Music),m=Object(l.a)(c,2),d=m[0],f=m[1];return a.a.createElement(u.t,null,a.a.createElement(u.k,null,a.a.createElement(h,{backButtonOnClick:function(){i.push("/".concat(t))},toggleSongModeOnClick:function(){d===g.Music?f(g.Lyrics):f(g.Music);try{W("INTERACTION","Songmode is toggled","SongMode_Toggle")}catch(e){console.error(e)}}})),a.a.createElement(u.i,null,(e=+o,d===g.Music?a.a.createElement(Z,{songNumber:e}):a.a.createElement(K,{songNumber:e}))))};try{P.a.initialize("UA-183902236-1"),P.a.pageview(window.location.pathname+window.location.search),console.debug("Page viewed")}catch(Q){console.error(Q)}var Y="Songs and Hymns of Life",$=function(){return console.debug("Current platforms: "+Object(u.A)()),a.a.createElement(c.a,null,a.a.createElement(s.d,null,a.a.createElement(s.b,{path:"/",component:E,exact:!0}),a.a.createElement(s.b,{path:"/:bookId",component:H,exact:!0}),a.a.createElement(s.b,{path:"/:bookId/:songId",component:G,exact:!0})))};i.a.render(a.a.createElement($,null),document.getElementById("root"))},43:function(e,n,t){}},[[302,9,10]]]);
//# sourceMappingURL=main.39280c9b.chunk.js.map