(this["webpackJsonphymnal-app"]=this["webpackJsonphymnal-app"]||[]).push([[1],{117:function(e,n,t){},119:function(e,n,t){"use strict";t.r(n);var r=t(0),c=t(36),o=t.n(c),s=t(39),i=t(8),a=(t(69),t(70),t(71),t(72),t(73),t(74),t(75),t(76),t(77),t(78),t(79),t(9)),u=t(3),j=(t(32),t(13)),l=t(49),b=t.n(l),d=t(42),f=t.n(d);var h,O=t(1),p=function(){var e,n,t=Object(r.useState)(""),c=Object(a.a)(t,2),o=c[0],s=c[1],i=Object(r.useState)(""),j=Object(a.a)(i,2),l=j[0],d=j[1],h=Object(r.useState)(""),p=Object(a.a)(h,2),g=p[0],x=p[1],m=Object(r.useState)(!1),y=Object(a.a)(m,2),v=y[0],k=y[1];return b.a.init((e="U2FsdGVkX19ijiVnA6XtmJ4wa/RL9NngWwn4uKfq6gO+4ZI/V1F/RCYL4REfk0tZ",n="jesus private key",f.a.AES.decrypt(e,n).toString(f.a.enc.Utf8))),Object(O.jsxs)("div",{id:"feedbackFormDiv",children:[Object(O.jsxs)(u.p,{children:[Object(O.jsx)(u.q,{position:"floating",children:"Name"}),Object(O.jsx)(u.o,{type:"text",value:o,placeholder:"Enter your name",onIonChange:function(e){return s(e.detail.value)}})]}),Object(O.jsxs)(u.p,{children:[Object(O.jsx)(u.q,{position:"floating",children:"What do you think?"}),Object(O.jsx)(u.w,{rows:7,value:l,placeholder:"Enter feedback",onIonChange:function(e){return d(e.detail.value)}})]}),Object(O.jsx)(u.a,{expand:"full",onClick:function(){var e={from_name:o,message:l};""===l||""===o?x("Please tell us your name and feedback message!"):(b.a.send("hymnal_app_service_id","template_z4z7bhi",e).then((function(e){console.debug("Email sent successfully.",e.status,e.text),x("Feedback Submitted Sucessfully, Thanks!")}),(function(e){x("Error Submitting Feedback: ".concat(e)),console.error("Error sending email: ",e)})),s(""),d(""));k(!0)},children:"Submit Feedback"}),Object(O.jsxs)(u.s,{id:"feedbackResponseModal",isOpen:v,onDidDismiss:w,children:[Object(O.jsx)("h1",{className:"center",children:g}),Object(O.jsx)(u.a,{id:"feedbackResponseOKButton",onClick:w,children:"OK"})]})]});function w(){x(""),k(!1)}},g=function(){var e=Object(r.useState)(""),n=Object(a.a)(e,2),t=n[0],c=n[1];return Object(O.jsxs)(u.i,{children:[""===t?Object(O.jsxs)(u.r,{children:[Object(O.jsx)(u.p,{id:"settingsTitle",children:Object(O.jsx)(u.q,{children:"Settings"})}),Object(O.jsx)(u.p,{children:Object(O.jsx)(u.a,{onClick:function(){return c("feedback")},children:"Submit Feedback"})})]}):null,"feedback"===t?Object(O.jsx)(p,{}):null,""!==t?Object(O.jsx)(u.a,{color:"light",expand:"full",id:"backToSettingsButton",onClick:function(){return c("")},children:"Return to Settings"}):null]})},x=t(7),m=t.n(x),y=t(20);!function(e){e[e.Music=0]="Music",e[e.Lyrics=1]="Lyrics"}(h||(h={}));var v={title:"",author:"",songNumber:0,lyrics:new Map},k="https://raw.githubusercontent.com/Church-Life-Apps/Resources/master/resources/songbooks.json",w=[{name:"Songs and Hymns of Life",bookId:"shl",lyricsUrl:"https://raw.githubusercontent.com/Church-Life-Apps/Resources/master/resources/metadata/shl.json",musicUrl:"https://raw.githubusercontent.com/Church-Life-Apps/Resources/master/resources/images/shl/SHL_"}],N=w,S=!1;function C(){return _.apply(this,arguments)}function _(){return(_=Object(y.a)(m.a.mark((function e(){var n,t,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!S){e.next=2;break}return e.abrupt("return",N);case 2:return e.next=4,fetch(k);case 4:if(!(n=e.sent)){e.next=17;break}return e.next=8,n.json();case 8:return t=e.sent,r=t.songbooks,t.testing,N=c=r,S=!0,e.abrupt("return",c);case 17:return e.abrupt("return",w);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e){return E.apply(this,arguments)}function E(){return(E=Object(y.a)(m.a.mark((function e(n){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:return t=e.sent,e.abrupt("return",t.find((function(e){return e.bookId===n})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var M=function(e){var n=Object(r.useState)(!1),t=Object(a.a)(n,2),c=t[0],o=t[1],s=Object(r.useState)("Choose a Songbook!"),l=Object(a.a)(s,2),b=l[0],d=l[1],f=Object(i.g)().bookId;return Object(r.useEffect)((function(){I(f).then((function(e){e&&d(e.name)}))}),[f]),Object(O.jsxs)(u.z,{children:[Object(O.jsx)(u.x,{id:"appName",children:b}),Object(O.jsx)(u.b,{slot:"start",children:function(){if(!e.backButtonOnClick)return null;return Object(O.jsx)(u.a,{onClick:e.backButtonOnClick,children:Object(O.jsx)(u.l,{icon:j.i})})}()}),Object(O.jsxs)(u.b,{slot:"primary",children:[function(){if(!e.toggleSongModeOnClick)return null;return Object(O.jsxs)(u.a,{id:"songViewToggler",onClick:e.toggleSongModeOnClick,children:[Object(O.jsx)(u.l,{icon:j.l}),Object(O.jsx)(u.l,{icon:j.r}),Object(O.jsx)(u.l,{icon:j.h})]})}(),Object(O.jsx)(u.a,{onClick:function(){return o(!0)},children:Object(O.jsx)(u.l,{icon:j.q})})]}),Object(O.jsxs)(u.s,{id:"settingsModal",isOpen:c,onDidDismiss:function(){return o(!1)},children:[Object(O.jsx)(g,{}),Object(O.jsx)(u.a,{id:"returnToHymnalButton",onClick:function(){return o(!1)},children:"Back to Hymnal"})]})]})},L=(t(117),function(){var e=Object(i.f)(),n=Object(r.useState)(w),t=Object(a.a)(n,2),c=t[0],o=t[1];return Object(r.useEffect)((function(){C().then((function(e){o(e)}))}),[]),Object(O.jsxs)(u.t,{children:[Object(O.jsx)(u.k,{children:Object(O.jsx)(M,{})}),Object(O.jsx)(u.i,{children:Object(O.jsx)(u.r,{children:c.map((function(n){return t=n,Object(O.jsx)(u.c,{onClick:function(){e.push(t.bookId)},className:"songbookCardView",id:t.bookId,children:Object(O.jsx)(u.g,{children:t.name})},t.name);var t}))})})]})}),T=function(e){var n=Object(i.g)().bookId,t=Object(r.useState)([]),c=Object(a.a)(t,2),o=c[0],s=c[1],j=Object(r.useState)(e.songs.entries()),l=Object(a.a)(j,1)[0],b=Object(i.f)();return 0===o.length&&d(l,20),o.length>0?Object(O.jsxs)("div",{children:[Object(O.jsx)(u.r,{id:"searchViewSongList",children:o}),Object(O.jsx)(u.m,{onIonInfinite:function(e){var n=e.target;d(l,10)||(n.disabled=!0);s(Array.from(o)),n.complete()},children:Object(O.jsx)(u.n,{loadingSpinner:"bubbles",loadingText:"Loading more songs..."})})]}):Object(O.jsx)(u.p,{children:Object(O.jsx)(u.q,{children:"No results found"})});function d(e,n){for(;n>0;){var t=e.next();if(t.done)return!1;var r=t.value[1];o.push(f(r)),n--}return!0}function f(e){return Object(O.jsxs)(u.c,{onClick:function(){b.push("/".concat(n,"/").concat(e.songNumber))},className:"hymnalListView",children:[Object(O.jsxs)(u.g,{children:[e.songNumber,". ",e.title]}),Object(O.jsx)(u.f,{children:e.author})]},e.songNumber)}},B=t(31);function F(e){return e.replace(/[!"#$%&'()*+,-./:;<=>?@[\]^_`{|}~]/g,"")}var R=t(118);function U(e,n){return R.compareTwoStrings(F(e.toString().toLowerCase()),n)}function V(e){return e.split(" ")}function A(e){return F(e).toLowerCase().trim()}function D(e){return!isNaN(+e)}var z=new Map,q=new Map,P=new Map;function W(e){return H.apply(this,arguments)}function H(){return(H=Object(y.a)(m.a.mark((function e(n){var t,r,c,o,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(t=z.get(n))){e.next=20;break}return e.next=4,I(n);case 4:if(r=e.sent){e.next=8;break}return console.error("No songbook found for id "+n),e.abrupt("return",[]);case 8:return e.next=10,fetch(r.lyricsUrl);case 10:return c=e.sent,e.next=13,c.json();case 13:return o=e.sent,s=o[r.name],z.set(n,s),console.log("Fetching lyrics for book "+n),e.abrupt("return",s);case 20:return console.debug("Returning stored lyrics for book "+n),e.abrupt("return",t);case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){return(J=Object(y.a)(m.a.mark((function e(n,t){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(t);case 2:if(r=e.sent,!(n<0||n>=r.length)){e.next=7;break}return e.abrupt("return",{title:"",author:"",songNumber:-1,lyrics:JSON.parse("{}")});case 7:return e.abrupt("return",r[n-1]);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(){return(K=Object(y.a)(m.a.mark((function e(n,t){var r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(t);case 2:if(r=e.sent,""!==n){e.next=7;break}return e.abrupt("return",r);case 7:if(!D(n)){e.next=11;break}return e.abrupt("return",r.filter((function(e){return e.songNumber.toString().startsWith(n)})));case 11:return c=new Map,r.forEach((function(e){c.set(e.songNumber,X(e,n))})),console.log(c),e.abrupt("return",r.filter((function(e){return c.get(e.songNumber)>0})).sort((function(e,n){return c.get(n.songNumber)-c.get(e.songNumber)})));case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e,n){var t=0,r=A(n),c=V(r),o=A(e.title),s=V(o),i=A(e.author),a=V(i);if(o.includes(r))t+=1e3;else{var u,j=Object(B.a)(s);try{for(j.s();!(u=j.n()).done;){var l,b=u.value,d=Object(B.a)(c);try{for(d.s();!(l=d.n()).done;){U(b,l.value)>.9&&(t+=100)}}catch(w){d.e(w)}finally{d.f()}}}catch(w){j.e(w)}finally{j.f()}}if(i.includes(r))t+=900;else{var f,h=Object(B.a)(a);try{for(h.s();!(f=h.n()).done;){var O,p=f.value,g=Object(B.a)(c);try{for(g.s();!(O=g.n()).done;){U(p,O.value)>.9&&(t+=90)}}catch(w){g.e(w)}finally{g.f()}}}catch(w){h.e(w)}finally{h.f()}}if(q.has(e.songNumber)||q.set(e.songNumber,Object.values(e.lyrics).map((function(e){return A(String(e))})).join(" ")),P.has(e.songNumber)||P.set(e.songNumber,V(q.get(e.songNumber))),q.get(e.songNumber).includes(r))t+=500;else{var x,m=Object(B.a)(P.get(e.songNumber));try{for(m.s();!(x=m.n()).done;){var y,v=x.value,k=Object(B.a)(c);try{for(k.s();!(y=k.n()).done;){U(v,y.value)>.9&&(t+=1)}}catch(w){k.e(w)}finally{k.f()}}}catch(w){m.e(w)}finally{m.f()}}return t}var Z=function(){var e=Object(r.useState)(""),n=Object(a.a)(e,2),t=n[0],c=n[1],o=Object(r.useState)([]),s=Object(a.a)(o,2),j=s[0],l=s[1],b=Object(i.g)().bookId;Object(r.useEffect)((function(){var e=setTimeout((function(){(function(e,n){return K.apply(this,arguments)})(t,b).then((function(e){l(e)})).catch((function(e){return console.error(e)}))}),200);return function(){return clearTimeout(e)}}),[t]);var d=Object(i.f)();return Object(O.jsxs)(u.t,{children:[Object(O.jsx)(u.k,{children:Object(O.jsx)(M,{backButtonOnClick:function(){return d.push("/")}})}),Object(O.jsx)(u.p,{children:Object(O.jsx)(u.o,{id:"searchBar",type:"search",value:t,placeholder:"Search for a song",onIonChange:function(e){return c(e.detail.value)}})}),Object(O.jsx)(u.i,{children:Object(O.jsx)(T,{songs:j},t+j.length)})]})},G=t(43),Y=function(e,n,t){G.a.event({category:e,action:n,label:t})};function $(e,n){try{Y("INTERACTION","Song viewed(".concat(h[n],")"),e.toString()),console.debug("Song number: ".concat(String(e)," viewed in ").concat(h[n]," mode"))}catch(t){console.error(t)}}var Q=function(e){var n=Object(r.useState)(v),t=Object(a.a)(n,2),c=t[0],o=t[1],s=Object(i.g)().bookId;return Object(r.useEffect)((function(){$(e.songNumber,h.Lyrics),function(e,n){return J.apply(this,arguments)}(e.songNumber,s).then((function(e){o(e)}))}),[]),Object(O.jsx)(u.j,{children:Object(O.jsx)(u.u,{class:"ion-justify-content-center",children:Object(O.jsx)(u.h,{size:"12","size-lg":"8","size-xl":"6",children:Object(O.jsxs)(u.c,{id:"lyricViewCard",className:"ion-padding",children:[Object(O.jsxs)(u.e,{className:"ion-text-center",children:[Object(O.jsx)(u.g,{children:null===c||void 0===c?void 0:c.title},"title"),Object(O.jsxs)(u.f,{children:["By ",null===c||void 0===c?void 0:c.author]},"author")]}),Object(O.jsx)(u.d,{children:c?function(e){for(var n=[],t=0,c=e.lyrics,o=Object.keys(c),s=Object.values(c),i=0;i<o.length;++i){var a=o[i],j=s[i];n.push(Object(O.jsx)(r.Fragment,{children:Object(O.jsx)("div",{className:"ion-margin-vertical"})},t++)),n.push(Object(O.jsx)("h5",{className:"ion-margin-top",children:(l=a,l.toLowerCase().replace("v","Verse ").replace("c","Chorus ").replace("b","Bridge ").replace("p","Pre-Chorus "))},t++)),j.forEach((function(e){n.push(Object(O.jsx)(u.v,{className:"lyricVerse",color:"dark",children:Object(O.jsx)("p",{children:e})},t++))}))}var l;return n}(c):c},"lyrics")]})})})})};var ee=[156,216,278,478],ne=function(e){var n,t=Object(u.B)("desktop")?window.innerWidth/2:window.innerWidth,c=Object(r.useState)(!1),o=Object(a.a)(c,2),s=o[0],j=o[1],l=Object(r.useState)(t),b=Object(a.a)(l,2),d=b[0],f=b[1],p=Object(r.useState)(!1),g=Object(a.a)(p,2),x=g[0],m=g[1],y=Object(r.useState)(),v=Object(a.a)(y,2),k=v[0],w=v[1],N=Object(i.g)().bookId,S=ee.includes(e.songNumber)&&"shl"===N,C=S&&s?"-B":"",_=(null===k||void 0===k?void 0:k.musicUrl)+((n=e.songNumber)<10?"00".concat(n):n<100?"0".concat(n):"".concat(n))+C+".png";return Object(r.useEffect)((function(){$(e.songNumber,h.Music)}),[e.songNumber]),Object(r.useEffect)((function(){I(N).then((function(e){w(e)}))}),[N]),Object(O.jsxs)("div",{children:[S&&Object(O.jsx)("div",{id:"songToggler",children:Object(O.jsx)(u.y,{checked:s,onIonChange:function(){return j(!s)}})}),Object(O.jsx)("img",{style:{width:d},id:"musicView",onDoubleClick:function(){f(x?t:2*t),m(!x)},src:_,alt:"No Song Found"})]})},te=function(){var e,n=Object(i.g)(),t=n.bookId,c=n.songId,o=Object(i.f)(),s=Object(r.useState)(h.Music),j=Object(a.a)(s,2),l=j[0],b=j[1];return Object(O.jsxs)(u.t,{children:[Object(O.jsx)(u.k,{children:Object(O.jsx)(M,{backButtonOnClick:function(){o.push("/".concat(t))},toggleSongModeOnClick:function(){l===h.Music?b(h.Lyrics):b(h.Music);try{Y("INTERACTION","Songmode is toggled","SongMode_Toggle")}catch(e){console.error(e)}}})}),Object(O.jsx)(u.i,{children:(e=+c,l===h.Music?Object(O.jsx)(ne,{songNumber:e}):Object(O.jsx)(Q,{songNumber:e}))})]})};try{G.a.initialize("UA-183902236-1"),G.a.pageview(window.location.pathname+window.location.search),console.debug("Page viewed")}catch(ce){console.error(ce)}var re=function(){return console.debug("Current platforms: "+Object(u.A)()),Object(O.jsx)(s.a,{children:Object(O.jsxs)(i.c,{children:[Object(O.jsx)(i.a,{path:"/",component:L,exact:!0}),Object(O.jsx)(i.a,{path:"/:bookId",component:Z,exact:!0}),Object(O.jsx)(i.a,{path:"/:bookId/:songId",component:te,exact:!0})]})})};o.a.render(Object(O.jsx)(re,{}),document.getElementById("root"))},32:function(e,n,t){},79:function(e,n,t){},82:function(e,n,t){var r={"./ion-action-sheet.entry.js":[121,5],"./ion-alert.entry.js":[122,6],"./ion-app_8.entry.js":[123,7],"./ion-avatar_3.entry.js":[124,17],"./ion-back-button.entry.js":[125,18],"./ion-backdrop.entry.js":[126,43],"./ion-button_2.entry.js":[127,19],"./ion-card_5.entry.js":[128,20],"./ion-checkbox.entry.js":[129,21],"./ion-chip.entry.js":[130,22],"./ion-col_3.entry.js":[131,44],"./ion-datetime_3.entry.js":[132,10],"./ion-fab_3.entry.js":[133,23],"./ion-img.entry.js":[134,45],"./ion-infinite-scroll_2.entry.js":[135,46],"./ion-input.entry.js":[136,24],"./ion-item-option_3.entry.js":[137,25],"./ion-item_8.entry.js":[138,26],"./ion-loading.entry.js":[139,27],"./ion-menu_3.entry.js":[140,28],"./ion-modal.entry.js":[141,8],"./ion-nav_2.entry.js":[142,14],"./ion-popover.entry.js":[143,9],"./ion-progress-bar.entry.js":[144,29],"./ion-radio_2.entry.js":[145,30],"./ion-range.entry.js":[146,31],"./ion-refresher_2.entry.js":[147,11],"./ion-reorder_2.entry.js":[148,16],"./ion-ripple-effect.entry.js":[149,47],"./ion-route_4.entry.js":[150,32],"./ion-searchbar.entry.js":[151,33],"./ion-segment_2.entry.js":[152,34],"./ion-select_3.entry.js":[153,35],"./ion-slide_2.entry.js":[154,48],"./ion-spinner.entry.js":[155,13],"./ion-split-pane.entry.js":[156,49],"./ion-tab-bar_2.entry.js":[157,36],"./ion-tab_2.entry.js":[158,15],"./ion-text.entry.js":[159,37],"./ion-textarea.entry.js":[160,38],"./ion-toast.entry.js":[161,39],"./ion-toggle.entry.js":[162,12],"./ion-virtual-scroll.entry.js":[163,50]};function c(e){if(!t.o(r,e))return Promise.resolve().then((function(){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}));var n=r[e],c=n[0];return t.e(n[1]).then((function(){return t(c)}))}c.keys=function(){return Object.keys(r)},c.id=82,e.exports=c},84:function(e,n,t){var r={"./ion-icon.entry.js":[164,57]};function c(e){if(!t.o(r,e))return Promise.resolve().then((function(){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}));var n=r[e],c=n[0];return t.e(n[1]).then((function(){return t(c)}))}c.keys=function(){return Object.keys(r)},c.id=84,e.exports=c},87:function(e,n){}},[[119,3,4]]]);
//# sourceMappingURL=main.f0cccfba.chunk.js.map