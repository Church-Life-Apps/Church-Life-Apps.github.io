(this["webpackJsonphymnal-app"]=this["webpackJsonphymnal-app"]||[]).push([[1],{118:function(e,n,t){"use strict";t.r(n);var r=t(0),c=t(36),s=t.n(c),o=t(39),i=t(11),a=(t(69),t(70),t(71),t(72),t(73),t(74),t(75),t(76),t(77),t(78),t(79),t(3)),u=t(9),j=(t(32),t(13)),l=t(49),b=t.n(l),d=t(42),h=t.n(d);var f,O=t(1),g=function(){var e,n,t=Object(r.useState)(""),c=Object(u.a)(t,2),s=c[0],o=c[1],i=Object(r.useState)(""),j=Object(u.a)(i,2),l=j[0],d=j[1],f=Object(r.useState)(""),g=Object(u.a)(f,2),p=g[0],x=g[1],y=Object(r.useState)(!1),m=Object(u.a)(y,2),v=m[0],k=m[1];return b.a.init((e="U2FsdGVkX19ijiVnA6XtmJ4wa/RL9NngWwn4uKfq6gO+4ZI/V1F/RCYL4REfk0tZ",n="jesus private key",h.a.AES.decrypt(e,n).toString(h.a.enc.Utf8))),Object(O.jsxs)("div",{id:"feedbackFormDiv",children:[Object(O.jsxs)(a.p,{children:[Object(O.jsx)(a.q,{position:"floating",children:"Name"}),Object(O.jsx)(a.o,{type:"text",value:s,placeholder:"Enter your name",onIonChange:function(e){return o(e.detail.value)}})]}),Object(O.jsxs)(a.p,{children:[Object(O.jsx)(a.q,{position:"floating",children:"What do you think?"}),Object(O.jsx)(a.w,{rows:7,value:l,placeholder:"Enter feedback",onIonChange:function(e){return d(e.detail.value)}})]}),Object(O.jsx)(a.a,{expand:"full",onClick:function(){var e={from_name:s,message:l};""===l||""===s?x("Please tell us your name and feedback message!"):(b.a.send("hymnal_app_service_id","template_z4z7bhi",e).then((function(e){console.debug("Email sent successfully.",e.status,e.text),x("Feedback Submitted Sucessfully, Thanks!")}),(function(e){x("Error Submitting Feedback: ".concat(e)),console.error("Error sending email: ",e)})),o(""),d(""));k(!0)},children:"Submit Feedback"}),Object(O.jsxs)(a.s,{id:"feedbackResponseModal",isOpen:v,onDidDismiss:N,children:[Object(O.jsx)("h1",{className:"center",children:p}),Object(O.jsx)(a.a,{id:"feedbackResponseOKButton",onClick:N,children:"OK"})]})]});function N(){x(""),k(!1)}},p=function(){var e=Object(r.useState)(""),n=Object(u.a)(e,2),t=n[0],c=n[1];return Object(O.jsxs)(a.i,{children:[""===t?Object(O.jsxs)(a.r,{children:[Object(O.jsx)(a.p,{id:"settingsTitle",children:Object(O.jsx)(a.q,{children:"Settings"})}),Object(O.jsx)(a.p,{children:Object(O.jsx)(a.a,{onClick:function(){return c("feedback")},children:"Submit Feedback"})})]}):null,"feedback"===t?Object(O.jsx)(g,{}):null,""!==t?Object(O.jsx)(a.a,{color:"light",expand:"full",id:"backToSettingsButton",onClick:function(){return c("")},children:"Return to Settings"}):null]})},x=function(e){var n=Object(r.useState)(!1),t=Object(u.a)(n,2),c=t[0],s=t[1];return Object(O.jsxs)(a.z,{children:[Object(O.jsx)(a.x,{id:"appName",children:Y}),Object(O.jsx)(a.b,{slot:"start",children:function(){if(!e.backButtonOnClick)return null;return Object(O.jsx)(a.a,{onClick:e.backButtonOnClick,children:Object(O.jsx)(a.l,{icon:j.i})})}()}),Object(O.jsxs)(a.b,{slot:"primary",children:[function(){if(!e.toggleSongModeOnClick)return null;return Object(O.jsxs)(a.a,{id:"songViewToggler",onClick:e.toggleSongModeOnClick,children:[Object(O.jsx)(a.l,{icon:j.l}),Object(O.jsx)(a.l,{icon:j.r}),Object(O.jsx)(a.l,{icon:j.h})]})}(),Object(O.jsx)(a.a,{onClick:function(){return s(!0)},children:Object(O.jsx)(a.l,{icon:j.q})})]}),Object(O.jsxs)(a.s,{id:"settingsModal",isOpen:c,onDidDismiss:function(){return s(!1)},children:[Object(O.jsx)(p,{}),Object(O.jsx)(a.a,{id:"returnToHymnalButton",onClick:function(){return s(!1)},children:"Back to Hymnal"})]})]})},y=function(){return Object(O.jsxs)(a.t,{children:[Object(O.jsx)(a.k,{children:Object(O.jsx)(x,{})}),Object(O.jsx)(a.i,{children:Object(O.jsx)(i.a,{to:"shl"})})]})},m=function(e){var n=Object(i.h)().bookId,t=Object(r.useState)([]),c=Object(u.a)(t,2),s=c[0],o=c[1],j=Object(r.useState)(e.songs.entries()),l=Object(u.a)(j,1)[0],b=Object(i.g)();return 0===s.length&&d(l,20),s.length>0?Object(O.jsxs)("div",{children:[Object(O.jsx)(a.r,{id:"searchViewSongList",children:s}),Object(O.jsx)(a.m,{onIonInfinite:function(e){var n=e.target;d(l,10)||(n.disabled=!0);o(Array.from(s)),n.complete()},children:Object(O.jsx)(a.n,{loadingSpinner:"bubbles",loadingText:"Loading more songs..."})})]}):Object(O.jsx)(a.p,{children:Object(O.jsx)(a.q,{children:"No results found"})});function d(e,n){for(;n>0;){var t=e.next();if(t.done)return!1;var r=t.value[1];s.push(h(r)),n--}return!0}function h(e){return Object(O.jsxs)(a.c,{onClick:function(){b.push("/".concat(n,"/").concat(e.songNumber))},className:"hymnalListView",children:[Object(O.jsxs)(a.g,{children:[e.songNumber,". ",e.title]}),Object(O.jsx)(a.f,{children:e.author})]},e.songNumber)}},v=t(8),k=t.n(v),N=t(31),S=t(22),w="Songs and Hymns of Life",C="https://raw.githubusercontent.com/Church-Life-Apps/Resources/master/resources/metadata/shl.json";!function(e){e[e.Music=0]="Music",e[e.Lyrics=1]="Lyrics"}(f||(f={}));var _={title:"",author:"",songNumber:0,lyrics:new Map};function E(e){return e.replace(/[!"#$%&'()*+,-./:;<=>?@[\]^_`{|}~]/g,"")}var L=t(117);function M(e,n){return L.compareTwoStrings(E(e.toString().toLowerCase()),n)}function I(e){return e.split(" ")}function T(e){return E(e).toLowerCase().trim()}function B(e){return!isNaN(+e)}var F=void 0,R=new Map,D=new Map;function V(){return A.apply(this,arguments)}function A(){return(A=Object(S.a)(k.a.mark((function e(){var n,t,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==F){e.next=13;break}return e.next=3,fetch(C);case 3:return n=e.sent,e.next=6,n.json();case 6:return t=e.sent,r=t[w],F=r,console.debug("Fetching lyrics"),e.abrupt("return",r);case 13:return console.debug("Returning stored lyrics"),e.abrupt("return",F);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(){return(z=Object(S.a)(k.a.mark((function e(n){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V();case 2:if(t=e.sent,!(n<0||n>=t.length)){e.next=7;break}return e.abrupt("return",{title:"",author:"",songNumber:-1,lyrics:JSON.parse("{}")});case 7:return e.abrupt("return",t[n-1]);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return(U=Object(S.a)(k.a.mark((function e(n){var t,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V();case 2:if(t=e.sent,""!==n){e.next=7;break}return e.abrupt("return",t);case 7:if(!B(n)){e.next=11;break}return e.abrupt("return",t.filter((function(e){return e.songNumber.toString().startsWith(n)})));case 11:return r=new Map,t.forEach((function(e){r.set(e.songNumber,q(e,n))})),console.log(r),e.abrupt("return",t.filter((function(e){return r.get(e.songNumber)>0})).sort((function(e,n){return r.get(n.songNumber)-r.get(e.songNumber)})));case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e,n){var t=0,r=T(n),c=I(r),s=T(e.title),o=I(s),i=T(e.author),a=I(i);if(s.includes(r))t+=1e3;else{var u,j=Object(N.a)(o);try{for(j.s();!(u=j.n()).done;){var l,b=u.value,d=Object(N.a)(c);try{for(d.s();!(l=d.n()).done;){M(b,l.value)>.9&&(t+=100)}}catch(S){d.e(S)}finally{d.f()}}}catch(S){j.e(S)}finally{j.f()}}if(i.includes(r))t+=900;else{var h,f=Object(N.a)(a);try{for(f.s();!(h=f.n()).done;){var O,g=h.value,p=Object(N.a)(c);try{for(p.s();!(O=p.n()).done;){M(g,O.value)>.9&&(t+=90)}}catch(S){p.e(S)}finally{p.f()}}}catch(S){f.e(S)}finally{f.f()}}if(R.has(e.songNumber)||R.set(e.songNumber,Object.values(e.lyrics).map((function(e){return T(String(e))})).join(" ")),D.has(e.songNumber)||D.set(e.songNumber,I(R.get(e.songNumber))),R.get(e.songNumber).includes(r))t+=500;else{var x,y=Object(N.a)(D.get(e.songNumber));try{for(y.s();!(x=y.n()).done;){var m,v=x.value,k=Object(N.a)(c);try{for(k.s();!(m=k.n()).done;){M(v,m.value)>.9&&(t+=1)}}catch(S){k.e(S)}finally{k.f()}}}catch(S){y.e(S)}finally{y.f()}}return t}var H=function(){var e=Object(r.useState)(""),n=Object(u.a)(e,2),t=n[0],c=n[1],s=Object(r.useState)([]),o=Object(u.a)(s,2),j=o[0],l=o[1];Object(r.useEffect)((function(){var e=setTimeout((function(){(function(e){return U.apply(this,arguments)})(t).then((function(e){l(e)}))}),200);return function(){return clearTimeout(e)}}),[t]);var b=Object(i.g)();return Object(O.jsxs)(a.t,{children:[Object(O.jsx)(a.k,{children:Object(O.jsx)(x,{backButtonOnClick:function(){return b.push("/")}})}),Object(O.jsx)(a.p,{children:Object(O.jsx)(a.o,{id:"searchBar",type:"search",value:t,placeholder:"Search for a song",onIonChange:function(e){return c(e.detail.value)}})}),Object(O.jsx)(a.i,{children:Object(O.jsx)(m,{songs:j},t+j.length)})]})},P=t(43),W=function(e,n,t){P.a.event({category:e,action:n,label:t})};function J(e,n){try{W("INTERACTION","Song viewed(".concat(f[n],")"),e.toString()),console.debug("Song number: ".concat(String(e)," viewed in ").concat(f[n]," mode"))}catch(t){console.error(t)}}var K=function(e){var n=Object(r.useState)(_),t=Object(u.a)(n,2),c=t[0],s=t[1];return Object(r.useEffect)((function(){J(e.songNumber,f.Lyrics),function(e){return z.apply(this,arguments)}(e.songNumber).then((function(e){s(e)}))}),[]),Object(O.jsx)(a.j,{children:Object(O.jsx)(a.u,{class:"ion-justify-content-center",children:Object(O.jsx)(a.h,{size:"12","size-lg":"8","size-xl":"6",children:Object(O.jsxs)(a.c,{id:"lyricViewCard",className:"ion-padding",children:[Object(O.jsxs)(a.e,{className:"ion-text-center",children:[Object(O.jsx)(a.g,{children:null===c||void 0===c?void 0:c.title},"title"),Object(O.jsxs)(a.f,{children:["By ",null===c||void 0===c?void 0:c.author]},"author")]}),Object(O.jsx)(a.d,{children:c?function(e){for(var n=[],t=0,c=e.lyrics,s=Object.keys(c),o=Object.values(c),i=0;i<s.length;++i){var u=s[i],j=o[i];n.push(Object(O.jsx)(r.Fragment,{children:Object(O.jsx)("div",{className:"ion-margin-vertical"})},t++)),n.push(Object(O.jsx)("h5",{className:"ion-margin-top",children:(l=u,l.toLowerCase().replace("v","Verse ").replace("c","Chorus ").replace("b","Bridge ").replace("p","Pre-Chorus "))},t++)),j.forEach((function(e){n.push(Object(O.jsx)(a.v,{className:"lyricVerse",color:"dark",children:Object(O.jsx)("p",{children:e})},t++))}))}var l;return n}(c):c},"lyrics")]})})})})};var X=[156,216,278,478],Z=function(e){var n,t=Object(a.B)("desktop")?window.innerWidth/2:window.innerWidth,c=Object(r.useState)(!1),s=Object(u.a)(c,2),o=s[0],i=s[1],j=Object(r.useState)(t),l=Object(u.a)(j,2),b=l[0],d=l[1],h=Object(r.useState)(!1),g=Object(u.a)(h,2),p=g[0],x=g[1],y=X.includes(e.songNumber),m=y&&o?"-B":"",v="https://raw.githubusercontent.com/Church-Life-Apps/Resources/master/resources/images/shl/SHL_"+((n=e.songNumber)<10?"00".concat(n):n<100?"0".concat(n):"".concat(n))+m+".png";return Object(r.useEffect)((function(){J(e.songNumber,f.Music)}),[e.songNumber]),Object(O.jsxs)("div",{children:[y&&Object(O.jsx)("div",{id:"songToggler",children:Object(O.jsx)(a.y,{checked:o,onIonChange:function(){return i(!o)}})}),Object(O.jsx)("img",{style:{width:b},id:"musicView",onDoubleClick:function(){d(p?t:2*t),x(!p)},src:v,alt:"No Song Found"})]})},G=function(){var e,n=Object(i.h)(),t=n.bookId,c=n.songId,s=Object(i.g)(),o=Object(r.useState)(f.Music),j=Object(u.a)(o,2),l=j[0],b=j[1];return Object(O.jsxs)(a.t,{children:[Object(O.jsx)(a.k,{children:Object(O.jsx)(x,{backButtonOnClick:function(){s.push("/".concat(t))},toggleSongModeOnClick:function(){l===f.Music?b(f.Lyrics):b(f.Music);try{W("INTERACTION","Songmode is toggled","SongMode_Toggle")}catch(e){console.error(e)}}})}),Object(O.jsx)(a.i,{children:(e=+c,l===f.Music?Object(O.jsx)(Z,{songNumber:e}):Object(O.jsx)(K,{songNumber:e}))})]})};try{P.a.initialize("UA-183902236-1"),P.a.pageview(window.location.pathname+window.location.search),console.debug("Page viewed")}catch(Q){console.error(Q)}var Y="Songs and Hymns of Life",$=function(){return console.debug("Current platforms: "+Object(a.A)()),Object(O.jsx)(o.a,{children:Object(O.jsxs)(i.d,{children:[Object(O.jsx)(i.b,{path:"/",component:y,exact:!0}),Object(O.jsx)(i.b,{path:"/:bookId",component:H,exact:!0}),Object(O.jsx)(i.b,{path:"/:bookId/:songId",component:G,exact:!0})]})})};s.a.render(Object(O.jsx)($,{}),document.getElementById("root"))},32:function(e,n,t){},79:function(e,n,t){},82:function(e,n,t){var r={"./ion-action-sheet.entry.js":[120,5],"./ion-alert.entry.js":[121,6],"./ion-app_8.entry.js":[122,7],"./ion-avatar_3.entry.js":[123,17],"./ion-back-button.entry.js":[124,18],"./ion-backdrop.entry.js":[125,43],"./ion-button_2.entry.js":[126,19],"./ion-card_5.entry.js":[127,20],"./ion-checkbox.entry.js":[128,21],"./ion-chip.entry.js":[129,22],"./ion-col_3.entry.js":[130,44],"./ion-datetime_3.entry.js":[131,10],"./ion-fab_3.entry.js":[132,23],"./ion-img.entry.js":[133,45],"./ion-infinite-scroll_2.entry.js":[134,46],"./ion-input.entry.js":[135,24],"./ion-item-option_3.entry.js":[136,25],"./ion-item_8.entry.js":[137,26],"./ion-loading.entry.js":[138,27],"./ion-menu_3.entry.js":[139,28],"./ion-modal.entry.js":[140,8],"./ion-nav_2.entry.js":[141,14],"./ion-popover.entry.js":[142,9],"./ion-progress-bar.entry.js":[143,29],"./ion-radio_2.entry.js":[144,30],"./ion-range.entry.js":[145,31],"./ion-refresher_2.entry.js":[146,11],"./ion-reorder_2.entry.js":[147,16],"./ion-ripple-effect.entry.js":[148,47],"./ion-route_4.entry.js":[149,32],"./ion-searchbar.entry.js":[150,33],"./ion-segment_2.entry.js":[151,34],"./ion-select_3.entry.js":[152,35],"./ion-slide_2.entry.js":[153,48],"./ion-spinner.entry.js":[154,13],"./ion-split-pane.entry.js":[155,49],"./ion-tab-bar_2.entry.js":[156,36],"./ion-tab_2.entry.js":[157,15],"./ion-text.entry.js":[158,37],"./ion-textarea.entry.js":[159,38],"./ion-toast.entry.js":[160,39],"./ion-toggle.entry.js":[161,12],"./ion-virtual-scroll.entry.js":[162,50]};function c(e){if(!t.o(r,e))return Promise.resolve().then((function(){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}));var n=r[e],c=n[0];return t.e(n[1]).then((function(){return t(c)}))}c.keys=function(){return Object.keys(r)},c.id=82,e.exports=c},84:function(e,n,t){var r={"./ion-icon.entry.js":[163,57]};function c(e){if(!t.o(r,e))return Promise.resolve().then((function(){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}));var n=r[e],c=n[0];return t.e(n[1]).then((function(){return t(c)}))}c.keys=function(){return Object.keys(r)},c.id=84,e.exports=c},87:function(e,n){}},[[118,3,4]]]);
//# sourceMappingURL=main.814275e0.chunk.js.map