(this["webpackJsonphymnal-app"]=this["webpackJsonphymnal-app"]||[]).push([[7],{100:function(e,n,t){"use strict";t.r(n);var r,a=t(0),o=t.n(a),c=t(39),i=t.n(c),s=t(37),l=t(4),u=(t(79),t(80),t(81),t(82),t(83),t(84),t(85),t(86),t(87),t(88),t(89),t(2)),m=t(5),d=(t(33),t(8)),f=t(49),b=t.n(f),y=function(){var e="hymnal_app_service_id",n="template_z4z7bhi",t=Object(a.useState)(""),r=Object(m.a)(t,2),c=r[0],i=r[1],s=Object(a.useState)(""),l=Object(m.a)(s,2),d=l[0],f=l[1],y=Object(a.useState)(""),g=Object(m.a)(y,2),j=g[0],p=g[1],h=Object(a.useState)(!1),E=Object(m.a)(h,2),v=E[0],O=E[1];return b.a.init(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).EMAILJS_USERID),o.a.createElement("div",{id:"feedbackFormDiv"},o.a.createElement(u.n,null,o.a.createElement(u.o,{position:"floating"},"Name"),o.a.createElement(u.m,{type:"text",value:c,placeholder:"Enter your name",onIonChange:function(e){return i(e.detail.value)}})),o.a.createElement(u.n,null,o.a.createElement(u.o,{position:"floating"},"What do you think?"),o.a.createElement(u.t,{rows:7,value:d,placeholder:"Enter feedback",onIonChange:function(e){return f(e.detail.value)}})),o.a.createElement(u.a,{expand:"full",onClick:function(){return function(){var t={from_name:c,message:d};""===d||""===c?p("Please tell us your name and feedback message!"):(b.a.send(e,n,t).then((function(e){console.log("Email sent successfully.",e.status,e.text),p("Feedback Submitted Sucessfully, Thanks!")}),(function(e){p("Error Submitting Feedback: ".concat(e)),console.log("Error sending email: ",e)})),i(""),f(""));O(!0)}()}},"Submit Feedback"),o.a.createElement(u.q,{id:"feedbackResponseModal",isOpen:v,onDidDismiss:function(){return S()}},o.a.createElement("h1",{className:"center"},j),o.a.createElement(u.a,{id:"feedbackResponseOKButton",onClick:function(){return S()}},"OK")));function S(){p(""),O(!1)}},g=function(){var e=Object(a.useState)(""),n=Object(m.a)(e,2),t=n[0],r=n[1];return o.a.createElement(u.h,null,""===t?o.a.createElement(u.p,null,o.a.createElement(u.n,{id:"settingsTitle"},o.a.createElement(u.o,null,"Settings")),o.a.createElement(u.n,null,o.a.createElement(u.a,{onClick:function(){return r("feedback")}},"Submit Feedback"))):null,"feedback"===t?o.a.createElement(y,null):null,""!==t?o.a.createElement(u.a,{color:"light",expand:"full",id:"backToSettingsButton",onClick:function(){return r("")}},"Return to Settings"):null)},j=function(e){var n=Object(a.useState)(!1),t=Object(m.a)(n,2),r=t[0],c=t[1];return o.a.createElement(u.w,null,o.a.createElement(u.u,{id:"appName"},ne),o.a.createElement(u.b,{slot:"start"},function(){if(!e.backButtonOnClick)return null;return o.a.createElement(u.a,{onClick:e.backButtonOnClick},o.a.createElement(u.j,{icon:d.i}))}()),o.a.createElement(u.b,{slot:"primary"},function(){if(!e.toggleSongModeOnClick)return null;return o.a.createElement(u.a,{id:"songViewToggler",onClick:e.toggleSongModeOnClick},o.a.createElement(u.j,{icon:d.l}),o.a.createElement(u.j,{icon:d.r}),o.a.createElement(u.j,{icon:d.h}))}(),o.a.createElement(u.a,{onClick:function(){return c(!0)}},o.a.createElement(u.j,{icon:d.q}))),o.a.createElement(u.q,{id:"settingsModal",isOpen:r,onDidDismiss:function(){return c(!1)}},o.a.createElement(g,null),o.a.createElement(u.a,{id:"returnToHymnalButton",onClick:function(){return c(!1)}},"Back to Hymnal")))},p=function(){return o.a.createElement(u.r,null,o.a.createElement(u.i,null,o.a.createElement(j,null)),o.a.createElement(u.h,null,o.a.createElement(l.a,{to:"shl"})))},h=t(68),E="Songs and Hymns of Life",v="https://raw.githubusercontent.com/Church-Life-Apps/Resources/master/resources/metadata/shl.json";function O(e){return e.replace(/[!"#$%&'()*+,-./:;<=>?@[\]^_`{|}~]/g,"")}!function(e){e[e.Music=0]="Music",e[e.Lyrics=1]="Lyrics"}(r||(r={}));var S=function(e){var n=Object(l.h)().bookId,t=Object(a.useState)([]),r=Object(m.a)(t,2),c=r[0],i=r[1],s=Object(a.useState)(e.songs.entries()),d=Object(m.a)(s,1)[0],f=Object(l.g)(),b=function(){if(void 0===e.searchString||"string"!==typeof e.searchString||""===e.searchString.trim())return[];var n=O(e.searchString.trim().toLowerCase()),t=Number(n);if(!isNaN(t)&&t>0&&t<=e.songs.length)return t;return n.split(" ")}(),y="number"===typeof b;return y?c.push(j(e.songs[b-1])):0===c.length&&g(d,20,b),c.length>0?o.a.createElement("div",null,o.a.createElement(u.p,null,c),o.a.createElement(u.k,{onIonInfinite:function(e){var n=e.target;g(d,10,b)||(n.disabled=!0);i(Array.from(c)),n.complete()},disabled:y},o.a.createElement(u.l,{loadingSpinner:"bubbles",loadingText:"Loading more songs..."}))):""!==e.searchString?o.a.createElement(u.n,null,o.a.createElement(u.o,null,"No results found")):null;function g(e,n,t){for(;n>0;){var r=e.next();if(r.done)return!1;var a=r.value[1];p(a,t)&&(c.push(j(a)),n--)}return!0}function j(e){return o.a.createElement(u.c,{key:e.songNumber,onClick:function(){f.push("/".concat(n,"/").concat(e.songNumber))},className:"hymnalListView"},o.a.createElement(u.g,null,e.songNumber,". ",e.title),o.a.createElement(u.f,null,e.author))}function p(e,n){if(void 0===n||0===n.length)return!0;var t,r=O(e.title.toLowerCase()),a=O(e.author.toLowerCase()),o=Object(h.a)(n);try{for(o.s();!(t=o.n()).done;){var c=t.value;if(!r.includes(c)&&!a.includes(c))return!1}}catch(i){o.e(i)}finally{o.f()}return!0}},_=t(7),k=t.n(_),C=t(25),w=t(72).a.Storage,N="shl";function T(){return x.apply(this,arguments)}function x(){return(x=Object(C.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",D(N).then(function(){var e=Object(C.a)(k.a.mark((function e(n){var t,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=11;break}return e.next=3,fetch(v);case 3:return t=e.sent,e.next=6,t.json();case 6:return r=e.sent,L(N,JSON.stringify(r)),e.abrupt("return",r[E]);case 11:return e.abrupt("return",JSON.parse(n)[E]);case 12:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).catch((function(e){return console.error(e),[]})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e,n){return I.apply(this,arguments)}function I(){return(I=Object(C.a)(k.a.mark((function e(n,t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w.set({key:n,value:t}).catch((function(e){console.log("Error storing item because ".concat(e,"."))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e){return R.apply(this,arguments)}function R(){return(R=Object(C.a)(k.a.mark((function e(n){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.get({key:n});case 2:if(null!==(t=e.sent.value)){e.next=5;break}return e.abrupt("return","");case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var M=function(){var e=Object(a.useState)(""),n=Object(m.a)(e,2),t=n[0],r=n[1],c=Object(a.useState)([]),i=Object(m.a)(c,2),s=i[0],d=i[1];Object(a.useEffect)((function(){T().then((function(e){return e||[]})).then(d)}),[]);var f=Object(l.g)();return o.a.createElement(u.r,null,o.a.createElement(u.i,null,o.a.createElement(j,{backButtonOnClick:function(){return f.push("/")}})),o.a.createElement(u.n,null,o.a.createElement(u.s,{id:"searchBar",type:"search",value:t,placeholder:"Search for a song",onIonChange:function(e){return r(e.detail.value)}})),o.a.createElement(u.h,{key:t},o.a.createElement(S,{key:t+s.length,searchString:t,songs:s})))},A=t(44),B=function(e,n,t){A.a.event({category:e,action:n,label:t})};function F(e,n){try{B("INTERACTION","Song viewed(".concat(r[n],")"),e.toString()),console.log("Song number: ".concat(String(e)," viewed in ").concat(r[n]," mode"))}catch(t){console.error(t)}}var H=function(e){var n=Object(a.useState)(),t=Object(m.a)(n,2),c=t[0],i=t[1];return Object(a.useEffect)((function(){F(e.songNumber,r.Lyrics),T().then((function(n){return n[e.songNumber-1]})).then(i).catch((function(e){return console.error(e),o.a.createElement(u.n,{lines:"none"},"No song found.")}))}),[e.songNumber]),o.a.createElement(u.c,null,o.a.createElement(u.e,null,o.a.createElement(u.g,{key:null===c||void 0===c?void 0:c.title},null===c||void 0===c?void 0:c.title)),o.a.createElement(u.d,{key:null===c||void 0===c?void 0:c.lyrics},c?function(e){var n=Object.keys(e.lyrics),t=[],r=0;return n.forEach((function(n){t.push(o.a.createElement(u.o,{key:r},n.toLowerCase().replace("v","Verse ").replace("c","Chorus ").replace("b","Bridge ").replace("p","Pre-Chorus "))),r++,e.lyrics[n].forEach((function(e){t.push(o.a.createElement(u.n,{key:r,lines:"none"},o.a.createElement(u.o,{className:"ion-text-wrap"},e))),r++}))})),t}(c):c))};var P=[156,216,278,478],W=function(e){var n,t=Object(u.y)("desktop")?window.innerWidth/2:window.innerWidth,c=Object(a.useState)(!1),i=Object(m.a)(c,2),s=i[0],l=i[1],d=Object(a.useState)(t),f=Object(m.a)(d,2),b=f[0],y=f[1],g=Object(a.useState)(!1),j=Object(m.a)(g,2),p=j[0],h=j[1],E=P.includes(e.songNumber),v=E&&s?"-B":"",O="https://raw.githubusercontent.com/Church-Life-Apps/Resources/master/resources/images/shl/SHL_"+((n=e.songNumber)<10?"00".concat(n):n<100?"0".concat(n):"".concat(n))+v+".png";return Object(a.useEffect)((function(){F(e.songNumber,r.Music)}),[e.songNumber]),o.a.createElement("div",null,E&&o.a.createElement("div",{id:"songToggler"},o.a.createElement(u.v,{checked:s,onIonChange:function(){return l(!s)}})),o.a.createElement("img",{style:{width:b},id:"musicView",onDoubleClick:function(){y(p?t:2*t),h(!p)},src:O,alt:"No Song Found"}))},U=function(){var e,n=Object(l.h)(),t=n.bookId,c=n.songId,i=Object(l.g)(),s=Object(a.useState)(r.Music),d=Object(m.a)(s,2),f=d[0],b=d[1];return o.a.createElement(u.r,null,o.a.createElement(u.i,null,o.a.createElement(j,{backButtonOnClick:function(){i.push("/".concat(t))},toggleSongModeOnClick:function(){f===r.Music?b(r.Lyrics):b(r.Music);try{B("INTERACTION","Songmode is toggled","SongMode_Toggle")}catch(e){console.error(e)}}})),o.a.createElement(u.h,null,(e=+c,f===r.Music?o.a.createElement(W,{songNumber:e}):o.a.createElement(H,{songNumber:e}))))},K=t(13),V=t(14),q=t(70),J="1.0",Q="hymnal_1",z="songs_1",G="".concat(Q,".").concat(z),X={name:G,location:"default"},Y=function(){function e(){var n=this;if(Object(K.a)(this,e),this.songsTable=void 0,Object(u.y)("cordova"))try{q.a.create(X).then((function(e){n.songsTable=e,e.executeSql(ee).then((function(){console.log("Successfully opened SQLite database schema ".concat(Q," and created table: ").concat(z,"."))}))}))}catch(r){console.log("Error creating SQLite database: "+r+r.message)}else try{var t=window.openDatabase(Q,J,G,5242880);t.changeVersion(J,J,(function(e){e.executeSql(ee)}),(function(e){console.log("Error creating database ".concat(G," because ").concat(e,", ").concat(e.message))}),(function(){console.log("Successfully opened WebSQL database schema: ".concat(Q," and created table: ").concat(z,"."))})),this.songsTable=t}catch(r){console.log("Error creating the WebSQL database: "+r+r.message)}}return Object(V.a)(e,[{key:"getSongsTable",get:function(){return this.songsTable}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),e}();Y.instance=void 0;var $="song_number",Z="book_id",ee="CREATE TABLE IF NOT EXISTS ".concat(z,"(\n  ").concat($," int,\n  ").concat(Z," int,\n  ").concat("num_hits"," int,\n  ").concat("last_used"," datetime,\n  ").concat("favorited"," boolean,\n  ").concat("author"," text,\n  ").concat("title"," text,\n  ").concat("lyrics"," text,\n  primary key (").concat($,", ").concat(Z,")\n);");try{A.a.initialize(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).GOOGLEANALYTICS_STREAMID),A.a.pageview(window.location.pathname+window.location.search),console.log("Page viewed")}catch(re){console.error(re)}var ne="Hymnal App",te=function(){return Y.getInstance(),o.a.createElement(s.a,null,o.a.createElement(l.d,null,o.a.createElement(l.b,{path:"/",component:p,exact:!0}),o.a.createElement(l.b,{path:"/:bookId",component:M,exact:!0}),o.a.createElement(l.b,{path:"/:bookId/:songId",component:U,exact:!0})))};i.a.render(o.a.createElement(te,null),document.getElementById("root"))},33:function(e,n,t){},89:function(e,n,t){},91:function(e,n,t){var r={"./ion-action-sheet-ios.entry.js":[105,11],"./ion-action-sheet-md.entry.js":[106,12],"./ion-alert-ios.entry.js":[107,13],"./ion-alert-md.entry.js":[108,14],"./ion-app_8-ios.entry.js":[109,15],"./ion-app_8-md.entry.js":[110,16],"./ion-avatar_3-ios.entry.js":[111,33],"./ion-avatar_3-md.entry.js":[112,34],"./ion-back-button-ios.entry.js":[113,35],"./ion-back-button-md.entry.js":[114,36],"./ion-backdrop-ios.entry.js":[115,77],"./ion-backdrop-md.entry.js":[116,78],"./ion-button_2-ios.entry.js":[117,37],"./ion-button_2-md.entry.js":[118,38],"./ion-card_5-ios.entry.js":[119,39],"./ion-card_5-md.entry.js":[120,40],"./ion-checkbox-ios.entry.js":[121,41],"./ion-checkbox-md.entry.js":[122,42],"./ion-chip-ios.entry.js":[123,43],"./ion-chip-md.entry.js":[124,44],"./ion-col_3.entry.js":[125,79],"./ion-datetime_3-ios.entry.js":[126,21],"./ion-datetime_3-md.entry.js":[127,22],"./ion-fab_3-ios.entry.js":[128,45],"./ion-fab_3-md.entry.js":[129,46],"./ion-img.entry.js":[130,80],"./ion-infinite-scroll_2-ios.entry.js":[131,81],"./ion-infinite-scroll_2-md.entry.js":[132,82],"./ion-input-ios.entry.js":[133,47],"./ion-input-md.entry.js":[134,48],"./ion-item-option_3-ios.entry.js":[135,49],"./ion-item-option_3-md.entry.js":[136,50],"./ion-item_8-ios.entry.js":[137,51],"./ion-item_8-md.entry.js":[138,52],"./ion-loading-ios.entry.js":[139,53],"./ion-loading-md.entry.js":[140,54],"./ion-menu_3-ios.entry.js":[141,55],"./ion-menu_3-md.entry.js":[142,56],"./ion-modal-ios.entry.js":[143,17],"./ion-modal-md.entry.js":[144,18],"./ion-nav_2.entry.js":[145,29],"./ion-popover-ios.entry.js":[146,19],"./ion-popover-md.entry.js":[147,20],"./ion-progress-bar-ios.entry.js":[148,57],"./ion-progress-bar-md.entry.js":[149,58],"./ion-radio_2-ios.entry.js":[150,59],"./ion-radio_2-md.entry.js":[151,60],"./ion-range-ios.entry.js":[152,61],"./ion-range-md.entry.js":[153,62],"./ion-refresher_2-ios.entry.js":[154,23],"./ion-refresher_2-md.entry.js":[155,24],"./ion-reorder_2-ios.entry.js":[156,31],"./ion-reorder_2-md.entry.js":[157,32],"./ion-ripple-effect.entry.js":[158,83],"./ion-route_4.entry.js":[159,63],"./ion-searchbar-ios.entry.js":[160,64],"./ion-searchbar-md.entry.js":[161,65],"./ion-segment_2-ios.entry.js":[162,66],"./ion-segment_2-md.entry.js":[163,67],"./ion-select_3-ios.entry.js":[164,68],"./ion-select_3-md.entry.js":[165,69],"./ion-slide_2-ios.entry.js":[166,84],"./ion-slide_2-md.entry.js":[167,85],"./ion-spinner.entry.js":[168,27],"./ion-split-pane-ios.entry.js":[169,86],"./ion-split-pane-md.entry.js":[170,87],"./ion-tab-bar_2-ios.entry.js":[171,70],"./ion-tab-bar_2-md.entry.js":[172,71],"./ion-tab_2.entry.js":[173,30],"./ion-text.entry.js":[174,72],"./ion-textarea-ios.entry.js":[175,73],"./ion-textarea-md.entry.js":[176,74],"./ion-toast-ios.entry.js":[177,75],"./ion-toast-md.entry.js":[178,76],"./ion-toggle-ios.entry.js":[179,25],"./ion-toggle-md.entry.js":[180,26],"./ion-virtual-scroll.entry.js":[181,88]};function a(e){if(!t.o(r,e))return Promise.resolve().then((function(){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}));var n=r[e],a=n[0];return t.e(n[1]).then((function(){return t(a)}))}a.keys=function(){return Object.keys(r)},a.id=91,e.exports=a},93:function(e,n,t){var r={"./ion-icon.entry.js":[183,91]};function a(e){if(!t.o(r,e))return Promise.resolve().then((function(){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}));var n=r[e],a=n[0];return t.e(n[1]).then((function(){return t(a)}))}a.keys=function(){return Object.keys(r)},a.id=93,e.exports=a}},[[100,9,10]]]);
//# sourceMappingURL=main.557be291.chunk.js.map